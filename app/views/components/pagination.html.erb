<%= render Ui::ComponentHeaderComponent.new(
  title: "Pagination 分页",
  description: "采用分页的形式分隔长列表，每次只加载一个页面。",
  when_to_use: ["当加载/渲染所有数据将花费很多时间时。", "可切换页码浏览数据。"]
) %>

<h3 class="text-xl font-bold text-gray-800 mb-4 mt-8">代码演示</h3>

<% 
  # 示例数据
  user_struct = Struct.new(:id, :name, :email)
  all_users = 150.times.map do |i|
    user_struct.new(i + 1, "User #{i + 1}", "user#{i + 1}@example.com")
  end
  
  # 模拟分页参数
  current_page = (params[:page] || 1).to_i
  per_page = (params[:per_page] || 10).to_i
  total_count = all_users.size
  
  # 计算当前页数据
  start_index = (current_page - 1) * per_page
  end_index = start_index + per_page - 1
  current_users = all_users[start_index..end_index] || []
%>

<%= render Ui::ExampleComponent.new(
  title: "基本分页",
  description: "基础分页",
  language: :erb,
  code: pagination_basic_code
) do %>
  <%= ant_pagination current_page: 1, total_count: 50, per_page: 10 %>
<% end %>

<%= render Ui::ExampleComponent.new(
  title: "更多页码",
  description: "更多页面时，页码会自动折叠，显示省略号",
  language: :erb,
  code: pagination_more_code
) do %>
  <%= ant_pagination current_page: 5, total_count: 500, per_page: 10 %>
<% end %>

<%= render Ui::ExampleComponent.new(
  title: "改变每页显示条数",
  description: "可通过下拉框改变一页显示的条目数",
  language: :erb,
  code: pagination_size_changer_code
) do %>
  <%= ant_pagination current_page: 1, total_count: 500, per_page: 20, show_size_changer: true %>
<% end %>

<%= render Ui::ExampleComponent.new(
  title: "快速跳转",
  description: "允许快速跳转到某一页",
  language: :erb,
  code: pagination_jumper_code
) do %>
  <%= ant_pagination current_page: 3, total_count: 500, per_page: 10, show_quick_jumper: true %>
<% end %>

<%= render Ui::ExampleComponent.new(
  title: "简洁模式",
  description: "简单的翻页",
  language: :erb,
  code: pagination_simple_code
) do %>
  <%= ant_pagination current_page: 2, total_count: 50, per_page: 10, simple: true %>
<% end %>

<%= render Ui::ExampleComponent.new(
  title: "小尺寸",
  description: "小型分页",
  language: :erb,
  code: pagination_small_code
) do %>
  <%= ant_pagination current_page: 2, total_count: 100, per_page: 10, size: :small %>
<% end %>

<%= render Ui::ExampleComponent.new(
  title: "完整功能",
  description: "展示所有配置项",
  language: :erb,
  code: pagination_full_code
) do %>
  <%= ant_pagination current_page: 3, 
                     total_count: 500, 
                     per_page: 20,
                     show_size_changer: true,
                     show_quick_jumper: true,
                     page_size_options: [10, 20, 30, 50, 100] %>
<% end %>

<%= render Ui::ExampleComponent.new(
  title: "配合 Table 使用",
  description: "实际场景中的分页应用",
  language: :erb,
  code: pagination_with_table_code
) do %>
  <div class="space-y-4">
    <%= ant_table current_users do |t| %>
      <% t.column "ID", class: "w-20 font-mono" do |u| %>
        <%= u.id %>
      <% end %>
      <% t.column "Name", class: "font-medium" do |u| %>
        <%= u.name %>
      <% end %>
      <% t.column "Email" do |u| %>
        <%= u.email %>
      <% end %>
    <% end %>
    
    <%= ant_pagination current_page: current_page, 
                       total_count: total_count, 
                       per_page: per_page,
                       show_size_changer: true %>
  </div>
<% end %>

<div class="mt-12 prose prose-gray max-w-none">
  <h2 class="text-2xl font-bold mb-4">API</h2>
  
  <h3 class="text-xl font-semibold mt-6 mb-3">Pagination</h3>
  
  <div class="overflow-x-auto">
    <table class="min-w-full border-collapse border border-gray-200">
      <thead>
        <tr class="bg-gray-50">
          <th class="border border-gray-200 px-4 py-2 text-left">参数</th>
          <th class="border border-gray-200 px-4 py-2 text-left">说明</th>
          <th class="border border-gray-200 px-4 py-2 text-left">类型</th>
          <th class="border border-gray-200 px-4 py-2 text-left">默认值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">current_page</td>
          <td class="border border-gray-200 px-4 py-2">当前页数</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">Integer</td>
          <td class="border border-gray-200 px-4 py-2">1</td>
        </tr>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">total_count</td>
          <td class="border border-gray-200 px-4 py-2">数据总数</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">Integer</td>
          <td class="border border-gray-200 px-4 py-2">0</td>
        </tr>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">per_page</td>
          <td class="border border-gray-200 px-4 py-2">每页条数</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">Integer</td>
          <td class="border border-gray-200 px-4 py-2">10</td>
        </tr>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">param_name</td>
          <td class="border border-gray-200 px-4 py-2">页码的 URL 参数名</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">Symbol</td>
          <td class="border border-gray-200 px-4 py-2">:page</td>
        </tr>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">per_page_param_name</td>
          <td class="border border-gray-200 px-4 py-2">每页条数的 URL 参数名</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">Symbol</td>
          <td class="border border-gray-200 px-4 py-2">:per_page</td>
        </tr>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">show_size_changer</td>
          <td class="border border-gray-200 px-4 py-2">是否显示 pageSize 切换器</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">Boolean</td>
          <td class="border border-gray-200 px-4 py-2">true</td>
        </tr>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">show_quick_jumper</td>
          <td class="border border-gray-200 px-4 py-2">是否可以快速跳转至某页</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">Boolean</td>
          <td class="border border-gray-200 px-4 py-2">false</td>
        </tr>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">show_total</td>
          <td class="border border-gray-200 px-4 py-2">是否显示总数</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">Boolean</td>
          <td class="border border-gray-200 px-4 py-2">true</td>
        </tr>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">simple</td>
          <td class="border border-gray-200 px-4 py-2">简洁模式</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">Boolean</td>
          <td class="border border-gray-200 px-4 py-2">false</td>
        </tr>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">size</td>
          <td class="border border-gray-200 px-4 py-2">尺寸大小</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">:default | :small</td>
          <td class="border border-gray-200 px-4 py-2">:default</td>
        </tr>
        <tr>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">page_size_options</td>
          <td class="border border-gray-200 px-4 py-2">指定每页可以显示多少条</td>
          <td class="border border-gray-200 px-4 py-2 font-mono text-sm">Array</td>
          <td class="border border-gray-200 px-4 py-2">[10, 20, 50, 100]</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 class="text-xl font-semibold mt-8 mb-3">Helper 方法</h3>
  
  <div class="bg-gray-50 p-4 rounded-lg">
    <pre class="text-sm"><code>ant_pagination(
  current_page: 1,
  total_count: 100,
  per_page: 10,
  param_name: :page,
  per_page_param_name: :per_page,
  show_size_changer: true,
  class: "custom-class"
)</code></pre>
  </div>

  <h3 class="text-xl font-semibold mt-8 mb-3">使用示例</h3>
  
  <h4 class="text-lg font-semibold mt-4 mb-2">在 Controller 中：</h4>
  <div class="bg-gray-50 p-4 rounded-lg">
    <pre class="text-sm"><code>def index
  @posts = Post.page(params[:page]).per(params[:per_page] || 10)
  @total_count = Post.count
  @current_page = params[:page] || 1
  @per_page = params[:per_page] || 10
end</code></pre>
  </div>

  <h4 class="text-lg font-semibold mt-4 mb-2">在 View 中：</h4>
  <div class="bg-gray-50 p-4 rounded-lg">
    <pre class="text-sm"><code>&lt;%= ant_table @posts do |t| %&gt;
  &lt;% t.column "Title" do |post| %&gt;
    &lt;%= post.title %&gt;
  &lt;% end %&gt;
&lt;% end %&gt;

&lt;%= ant_pagination current_page: @current_page,
                   total_count: @total_count,
                   per_page: @per_page %&gt;</code></pre>
  </div>
</div>
