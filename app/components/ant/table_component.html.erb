<div class="relative flex flex-col border border-[#f0f0f0] rounded-lg bg-white <%= @html_options[:class] %>">
  <!-- Table Container (Scrollable) -->
  <div class="<%= @sticky_header ? 'max-h-[500px] overflow-auto' : 'overflow-x-auto' %> rounded-t-lg isolate">
    <table class="min-w-full text-left text-sm whitespace-nowrap border-collapse">
      <thead class="bg-[#fafafa] border-b border-[#f0f0f0] <%= 'sticky top-0 z-30 shadow-sm' if @sticky_header %>">
        <tr>
          <% @columns.each_with_index do |col, index| %>
            <% 
               sticky_class = ""
               # Sticky Header Cell needs higher z-index (40) than Sticky Body Cell (20)
               if col[:sticky] == :left
                 sticky_class = "sticky left-0 z-40 bg-[#fafafa] shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]"
               elsif col[:sticky] == :right
                 sticky_class = "sticky right-0 z-40 bg-[#fafafa] shadow-[-2px_0_5px_-2px_rgba(0,0,0,0.1)]"
               end
            %>
            <th scope="col" class="px-4 py-3 font-semibold text-gray-900 <%= col[:html_options][:class] %> <%= sticky_class %>">
              <%= col[:header] %>
            </th>
          <% end %>
        </tr>
      </thead>
      <tbody class="divide-y divide-[#f0f0f0] bg-white">
        <% @collection.each do |item| %>
          <tr class="hover:bg-[#fafafa] transition-colors group">
            <% @columns.each do |col| %>
              <% 
                 sticky_td_class = ""
                 # Sticky Body Cell needs lower z-index (20) than Header
                 if col[:sticky] == :left
                   sticky_td_class = "sticky left-0 z-20 bg-white group-hover:bg-[#fafafa] shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]"
                 elsif col[:sticky] == :right
                   sticky_td_class = "sticky right-0 z-20 bg-white group-hover:bg-[#fafafa] shadow-[-2px_0_5px_-2px_rgba(0,0,0,0.1)]"
                 end
              %>
              <td class="px-4 py-3 text-gray-700 <%= col[:html_options][:class] %> <%= sticky_td_class %>">
                <%= view_context.capture(item, &col[:block]) %>
              </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  
  <!-- Pagination Footer -->
  <% if @paginate %>
    <div class="px-4 py-3 border-t border-[#f0f0f0] flex justify-end bg-white rounded-b-lg">
      <%= @paginate %>
    </div>
  <% end %>
</div>
